<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ABC Phonics - Bacchon ke liye</title>
  <style>
    :root{
      --bg: #fff9f0;
      --card: #ffffff;
      --accent: #ff7a59;
      --muted: #666;
      --shadow: 0 6px 18px rgba(0,0,0,0.08);
      --radius: 12px;
    }
    *{box-sizing:border-box}
    body{font-family: "Noto Sans", "Segoe UI", Roboto, Arial; margin:0; background:var(--bg); color:#222}
    header{background:linear-gradient(90deg,#ffd54f,#ffb74d);padding:18px;text-align:center;border-bottom:4px solid #ffd54f}
    header h1{margin:0;font-size:1.5rem}
    .topbar{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;padding:12px;align-items:center}
    .topbar select, .topbar button, .topbar label{font-size:0.95rem;padding:8px;border-radius:8px;border:1px solid #e6e6e6;background:#fff}
    .controls{max-width:1100px;margin:12px auto;padding:0 12px}
    .grid{display:grid;grid-template-columns:repeat(6,1fr);gap:12px;padding:12px;max-width:1100px;margin:0 auto}
    .card{background:var(--card);border-radius:var(--radius);padding:14px;text-align:center;box-shadow:var(--shadow);cursor:pointer;transition:transform .12s ease, box-shadow .12s}
    .card:active{transform:translateY(3px)}
    .letter{font-size:2.1rem;font-weight:800;color:var(--accent)}
    .emoji{font-size:2.4rem;margin:10px 0}
    .word{font-size:1.05rem;margin-top:6px;color:#333}
    .playbtn{margin-top:8px;padding:8px 10px;border-radius:8px;border:0;background:var(--accent);color:#fff;cursor:pointer}
    footer{padding:16px;text-align:center;color:var(--muted);font-size:.95rem}
    .row{display:flex;gap:8px;align-items:center}
    .small{font-size:0.85rem;color:var(--muted)}
    @media (max-width:1000px){ .grid{grid-template-columns:repeat(4,1fr)} }
    @media (max-width:640px){ .grid{grid-template-columns:repeat(2,1fr)} .topbar{flex-direction:column} }
  </style>
</head>
<body>
  <header>
    <h1>‡§Ö‡§ï‡•ç‡§∑‡§∞ ‡§î‡§∞ ‡§ß‡•ç‡§µ‡§®‡§ø ‚Äî A se Z (‡§¨‡§ö‡•ç‡§ö‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è)</h1>
  </header>

  <div class="controls">
    <div class="topbar" style="justify-content:space-between;max-width:1100px;margin:0 auto;">
      <div class="row">
        ‡§≠‡§æ‡§∑‡§æ:
        <select id="langSelect" title="Select language">
          <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
          <option value="en">English</option>
        </select>

        ‡§µ‡•â‡§á‡§∏:
        <select id="voiceSelect" title="Choose voice"></select>

        <button id="testBtn" class="playbtn">Test</button>
      </div>

      <div class="row">
        <label style="display:flex;align-items:center;gap:6px">
          <input type="checkbox" id="useRecorded"> Use recorded audio files (optional)
        </label>
        <span class="small">Recorded audio files expected at <code>audio/A.mp3</code> ... <code>audio/Z.mp3</code></span>
      </div>
    </div>
  </div>

  <main class="grid" id="grid" aria-live="polite"></main>

  <footer>
    ‡§Ø‡§π prototype browser ‡§ï‡•Ä Text-to-Speech ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§ ‡§Ö‡§ó‡§∞ ‡§Ü‡§™ recorded audio ‡§¶‡•á‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç ‡§§‡•ã files `audio/A.mp3` ... `audio/Z.mp3` ‡§∞‡§ñ ‡§ï‡§∞ "Use recorded audio files" ‡§ö‡•á‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§
  </footer>

<script>
/*
  Alphabet app single-file prototype
  - By default uses emoji icons and browser SpeechSynthesis
  - If you add recorded audio files (audio/A.mp3 ... audio/Z.mp3)
    and enable "Use recorded audio files", the app will try to play them.
  - Customize words/images below.
*/

const letters = [
  {l:'A', emoji:'üçé', hi:'‡§∏‡•á‡§µ', en:'apple', audio:'A.mp3'},
  {l:'B', emoji:'‚öΩÔ∏è', hi:'‡§ó‡•á‡§Ç‡§¶', en:'ball', audio:'B.mp3'},
  {l:'C', emoji:'üê±', hi:'‡§¨‡§ø‡§≤‡•ç‡§≤‡•Ä', en:'cat', audio:'C.mp3'},
  {l:'D', emoji:'üê∂', hi:'‡§ï‡•Å‡§§‡•ç‡§§‡§æ', en:'dog', audio:'D.mp3'},
  {l:'E', emoji:'üêò', hi:'‡§π‡§æ‡§•‡•Ä', en:'elephant', audio:'E.mp3'},
  {l:'F', emoji:'üêü', hi:'‡§Æ‡§õ‡§≤‡•Ä', en:'fish', audio:'F.mp3'},
  {l:'G', emoji:'üçá', hi:'‡§Ö‡§Ç‡§ó‡•Ç‡§∞', en:'grapes', audio:'G.mp3'},
  {l:'H', emoji:'üêî', hi:'‡§Æ‡•Å‡§∞‡•ç‡§ó‡•Ä', en:'hen', audio:'H.mp3'},
  {l:'I', emoji:'üç®', hi:'‡§Ü‡§á‡§∏-‡§ï‡•ç‡§∞‡•Ä‡§Æ', en:'ice-cream', audio:'I.mp3'},
  {l:'J', emoji:'ü´ó', hi:'‡§ú‡•Å‡§ó', en:'jug', audio:'J.mp3'},
  {l:'K', emoji:'ü™Å', hi:'‡§™‡§§‡§Ç‡§ó', en:'kite', audio:'K.mp3'},
  {l:'L', emoji:'ü¶Å', hi:'‡§∂‡•á‡§∞', en:'lion', audio:'L.mp3'},
  {l:'M', emoji:'üêí', hi:'‡§¨‡§Ç‡§¶‡§∞', en:'monkey', audio:'M.mp3'},
  {l:'N', emoji:'ü™∫', hi:'‡§ò‡•ã‡§Ç‡§∏‡§≤‡§æ', en:'nest', audio:'N.mp3'},
  {l:'O', emoji:'üçä', hi:'‡§∏‡§Ç‡§§‡§∞‡§æ', en:'orange', audio:'O.mp3'},
  {l:'P', emoji:'ü¶ö', hi:'‡§Æ‡•ã‡§∞', en:'peacock', audio:'P.mp3'},
  {l:'Q', emoji:'üë∏', hi:'‡§∞‡§æ‡§®‡•Ä', en:'queen', audio:'Q.mp3'},
  {l:'R', emoji:'üåπ', hi:'‡§ó‡•Å‡§≤‡§æ‡§¨', en:'rose', audio:'R.mp3'},
  {l:'S', emoji:'ü¶¢', hi:'‡§π‡§Ç‡§∏', en:'swan', audio:'S.mp3'},
  {l:'T', emoji:'‚òéÔ∏è', hi:'‡§ü‡•á‡§≤‡•Ä‡§´‡•ã‡§®', en:'telephone', audio:'T.mp3'},
  {l:'U', emoji:'‚òÇÔ∏è', hi:'‡§õ‡§æ‡§§‡§æ', en:'umbrella', audio:'U.mp3'},
  {l:'V', emoji:'üöê', hi:'‡§µ‡•à‡§®', en:'van', audio:'V.mp3'},
  {l:'W', emoji:'‚åö', hi:'‡§ò‡§°‡§º‡•Ä', en:'watch', audio:'W.mp3'},
  {l:'X', emoji:'üéº', hi:'‡§ú‡§º‡§æ‡§á‡§≤‡•ã‡§´‡•ã‡§®', en:'xylophone', audio:'X.mp3'},
  {l:'Y', emoji:'‚õµ', hi:'‡§Ø‡•â‡§ü', en:'yacht', audio:'Y.mp3'},
  {l:'Z', emoji:'ü¶ì', hi:'‡§ú‡§º‡•á‡§¨‡•ç‡§∞‡§æ', en:'zebra', audio:'Z.mp3'}
];

const grid = document.getElementById('grid');
const langSelect = document.getElementById('langSelect');
const voiceSelect = document.getElementById('voiceSelect');
const testBtn = document.getElementById('testBtn');
const useRecorded = document.getElementById('useRecorded');

function createCard(item){
  const el = document.createElement('div');
  el.className = 'card';
  el.setAttribute('role','button');
  el.setAttribute('tabindex','0');
  el.innerHTML = `
    <div class="letter">${item.l}</div>
    <div class="emoji" aria-hidden="true">${item.emoji}</div>
    <div class="word" data-hi="${item.hi}" data-en="${item.en}">${item.hi}</div>
    <button class="playbtn" aria-label="Suno ${item.l}">üîä ‡§∏‡•Å‡§®‡•ã</button>
  `;
  // Click handlers on both card and the button
  el.querySelector('.playbtn').addEventListener('click', (ev)=>{
    ev.stopPropagation();
    playItem(item);
  });
  el.addEventListener('click', ()=>playItem(item));
  el.addEventListener('keypress', (e)=>{ if(e.key === 'Enter' || e.key === ' ') playItem(item); });
  return el;
}

letters.forEach(it => grid.appendChild(createCard(it)));

function speakText(text, lang){
  if(!('speechSynthesis' in window)) {
    alert('Aapke browser mein Text-to-Speech available nahi hai. Chrome/Edge ka latest version use karein.');
    return;
  }
  const utter = new SpeechSynthesisUtterance(text);
  const voices = speechSynthesis.getVoices();
  const sel = voiceSelect.value;
  if(voices[sel]) utter.voice = voices[sel];
  utter.lang = lang === 'hi' ? 'hi-IN' : 'en-US';
  speechSynthesis.cancel();
  speechSynthesis.speak(utter);
}

function playRecordedAudio(letterObj){
  // tries to play audio/<filename> relative to this HTML file
  const base = 'audio/';
  const file = base + (letterObj.l) + '.mp3'; // expects A.mp3, B.mp3, ...
  const a = new Audio(file);
  a.play().catch(err=>{
    // fallback to TTS if file missing/unplayable
    console.warn('Recorded audio not playable:', err);
    const lang = langSelect.value;
    const text = lang === 'hi' ? letterObj.hi : letterObj.en;
    speakText(text, lang);
  });
}

function playItem(item){
  const useRec = useRecorded.checked;
  if(useRec){
    // attempt recorded, fall back to TTS automatically inside playRecordedAudio
    playRecordedAudio(item);
  } else {
    const lang = langSelect.value;
    const text = lang === 'hi' ? item.hi : item.en;
    // Optionally prepend letter name: "A for Apple" in English or "A matlab Apple, Apple = ‡§∏‡•á‡§µ" in Hindi
    if(lang === 'en'){
      speakText(`${item.l} for ${text}`, 'en');
    } else {
      // Hindi phrasing
      speakText(`${item.l} matlab ${text}`, 'hi');
    }
  }
}

/* populate voices */
function populateVoices(){
  const voices = speechSynthesis.getVoices();
  voiceSelect.innerHTML = '';
  voices.forEach((v, idx) => {
    const opt = document.createElement('option');
    opt.value = idx;
    opt.textContent = `${v.name} ‚Äî ${v.lang}`;
    voiceSelect.appendChild(opt);
  });
  // select a Hindi voice if available when Hindi is selected
  selectPreferredVoice();
}
speechSynthesis.onvoiceschanged = populateVoices;
populateVoices();

function selectPreferredVoice(){
  const voices = speechSynthesis.getVoices();
  const lang = langSelect.value;
  if(!voices.length) return;
  // Try to pick first voice that matches lang
  let idx = voices.findIndex(v => v.lang && v.lang.toLowerCase().startsWith(lang === 'hi' ? 'hi' : 'en'));
  if(idx === -1) idx = 0;
  voiceSelect.value = idx;
}

/* test button */
testBtn.addEventListener('click', ()=>{
  const lang = langSelect.value;
  const text = lang === 'hi' ? '‡§Ø‡§π ‡§è‡§ï ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§£ ‡§π‡•à' : 'This is a test';
  speakText(text, lang);
});

/* change voice selection when language changes to try to pick matching voice */
langSelect.addEventListener('change', ()=>{
  selectPreferredVoice();
});

/* keyboard accessibility: space/enter already handled on card element */

/* Helpful: Preload recorded audio existence check (non-blocking) */
function checkAudioFiles(){
  // Not strictly necessary, but we can mark cards with missing audio if we want.
  // skipping heavy checks to keep startup fast.
}

/* init */
checkAudioFiles();

/* Optional: allow clicking letter to show vocabulary in chosen language in aria-live region */
</script>
</body>
          </html>
